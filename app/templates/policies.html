<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Policies - Compliance Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/pages.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}" />
</head>

<body>
  <div class="dashboard-wrapper">
    <!-- SIDEBAR -->
        {% set active_page = '' %}
    {% include 'components/sidebar.html' %}
    <main class="main-content">
      <!-- Top Header -->
            {% set page_title = 'Policies Overview' %}
      {% include 'components/navbar.html' %}
      <section class="content-area">
        <!-- POLICIES COMPLIANCE STATUS -->
        <div class="content-card">
          <div class="card-title">Policies Compliance Status</div>

          <div style="
                display: flex;
                gap: 40px;
                margin-top: 20px;
                justify-content: center;
              ">
            <!-- PASSWORD POLICY CIRCLE -->
            <div style="text-align: center">
              <svg width="120" height="120" viewBox="0 0 120 120" style="transform: rotate(-90deg)">
                <circle cx="60" cy="60" r="50" stroke="#d6d9dd" stroke-width="12" fill="none" />
                <circle cx="60" cy="60" r="50" stroke="#5a7a99" stroke-width="12" fill="none" stroke-dasharray="314"
                  stroke-dashoffset="214" stroke-linecap="round" style="transition: 0.6s ease" />
              </svg>
              <div style="
                    margin-top: -70px;
                    font-size: 20px;
                    font-weight: bold;
                    color: #333;
                  ">
                32%
              </div>
              <div style="
                    margin-top: 55px;
                    font-size: 14px;
                    color: #333;
                    font-weight: 600;
                  ">
                Password Policy
              </div>
            </div>

            <!-- BACKUP POLICY CIRCLE -->
            <div style="text-align: center">
              <svg width="120" height="120" viewBox="0 0 120 120" style="transform: rotate(-90deg)">
                <circle cx="60" cy="60" r="50" stroke="#d6d9dd" stroke-width="12" fill="none" />
                <circle cx="60" cy="60" r="50" stroke="#90a4b7" stroke-width="12" fill="none" stroke-dasharray="314"
                  stroke-dashoffset="100" stroke-linecap="round" style="transition: 0.6s ease" />
              </svg>
              <div style="
                    margin-top: -70px;
                    font-size: 20px;
                    font-weight: bold;
                    color: #333;
                  ">
                68%
              </div>
              <div style="
                    margin-top: 55px;
                    font-size: 14px;
                    color: #333;
                    font-weight: 600;
                  ">
                Backup Policy
              </div>
            </div>
          </div>
        </div>

        <!-- PASSWORD POLICY -->
        <div class="content-card">
          <div class="card-title">üîê Password Policy</div>
          <ul class="policy-list">
            <li>Password must be changed every <b>60 days</b>.</li>
            <li>Minimum length: <b>12 characters</b>.</li>
            <li>Must include at least one <b>uppercase letter</b>.</li>
            <li>Must include at least one <b>lowercase letter</b>.</li>
            <li>Must include at least one <b>number</b>.</li>
            <li>
              Must include at least one <b>special symbol</b> (e.g.,
              !@#$%^&*).
            </li>
          </ul>
        </div>

        <div class="divider"></div>

        <!-- BACKUP POLICY -->
        <div class="content-card">
          <div class="card-title">üíæ Backup Policy</div>
          <ul class="policy-list">
            <li>
              Backup type:
              <b>Hybrid (Local + Cloud-based minimal storage)</b>.
            </li>
            <li>Backup frequency: <b>Weekly</b>.</li>
            <li>Retention period: <b>30 days</b>.</li>
            <li>Backup responsibility: <b>IT administrator</b>.</li>
            <li>Recovery readiness checks performed <b>monthly</b>.</li>
            <li>Local backup stored on an external encrypted drive.</li>
            <li>
              Cloud backup stored on cost-effective shared hosting storage.
            </li>
          </ul>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Load User Details
    const username = localStorage.getItem("username");
    const userPicture = localStorage.getItem("userProfilePicture");
    if (username) {
      document.querySelector(".profile-name").textContent = username;
      document.querySelector(".profile-email").textContent = localStorage.getItem("userEmail") || username + "@company.com";
      if (userPicture) {
        document.getElementById('profileImage').src = userPicture;
        document.getElementById('profileImage').style.display = 'block';
        document.getElementById('profileEmoji').style.display = 'none';
      }
    }

    // Dark mode
    if (localStorage.getItem("darkMode") === "true") {
      document.body.classList.add("dark-mode");
      const moonBtn = document.querySelectorAll(".icon-btn")[1];
      if (moonBtn) moonBtn.textContent = "‚òÄÔ∏è";
    }

    const moonBtns = document.querySelectorAll(".icon-btn");
    if (moonBtns[1]) {
      moonBtns[1].addEventListener("click", function () {
        document.body.classList.toggle("dark-mode");
        const isDark = document.body.classList.contains("dark-mode");
        localStorage.setItem("darkMode", isDark);
        this.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
      });
    }

    // Logout
    document
      .querySelector(".logout-btn")
      .addEventListener("click", async function (e) {
        e.preventDefault();
        if (await showConfirm("Are you sure you want to logout?", "Confirm Logout")) {
          localStorage.clear();
          window.location.href = "signin.html";
        }
      });
  </script>
  <script src="{{ url_for('static', filename='js/modal.js') }}"></script>
  <script src="{{ url_for('static', filename='js/api.js') }}"></script>
  <script src="{{ url_for('static', filename='js/notifications.js') }}"></script>
  <style>
    /* Notification Styles (Duplicated from dashboard for consistency) */
    .header-actions {
      display: flex;
      gap: 15px;
      align-items: center;
      position: relative;
    }

    .notification-dropdown {
      position: absolute;
      top: 60px;
      right: 0;
      width: 320px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      overflow: hidden;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      border: 1px solid #edf2f7;
    }

    .notification-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .notification-header {
      padding: 15px 20px;
      border-bottom: 1px solid #f1f3f5;
      font-weight: 600;
      color: #2c3e50;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .notification-item {
      padding: 15px 20px;
      border-bottom: 1px solid #f8f9fa;
      transition: background 0.2s;
      cursor: pointer;
    }

    .notification-item:hover {
      background: #f8f9fa;
    }

    .notif-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .notif-desc {
      font-size: 12px;
      color: #6c757d;
      line-height: 1.4;
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #e74c3c;
      color: white;
      font-size: 10px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid white;
    }
  </style>
</body>

</html>